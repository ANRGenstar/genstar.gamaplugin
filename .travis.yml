sudo: required
language: java
dist: trusty
jdk:
- oraclejdk8
before_install:
- rm ~/.m2/settings.xml
notifications:
  email: false
cache:
  directories:
  - "$HOME/.m2"
addons:
  apt:
    packages:
    - sshpass
    - oracle-java8-installer
  ssh_known_hosts:
  - 141.115.24.12
  sonarcloud:
    organization: "anrgenstar"
    token:
      secure: "yn1bxhZigtOENjIFgNq5uqsk3VNCDfdkvSJIHNVgqtbOtgKunNpKQfJbSCJrRZTPua5GnawYMSCcPD4DSNrnscPFsKYckROOBi3ib5h2Bb7NQEUIc3SKTgDa1a5rdrBe516bS43LDVMHmItvgc5ez0CkFFppS8E1/2xHdrWkfFuZcoTi6AVlHh2gwLotVaUlBLJPzMfrsVrWZ7TARDz4sB5F0M7zJBRUUOxmv4ZL2DfzqTNqdCEiWF+X12OJIXr/0qlp/R63x4v4nvOXGAT1UA9kEHLD7GxsgKlsEY/Jnwo5hNfqg15i7bCmiYl6JYUC0my3hKcfL0QyidzuyS7c2eBaVB5pFgCaQuNpQ7djYPMj7yTRqoTDB0MnV4RCi+BMZjH02vM0XA1B9W5jIP3pOeszkLeaybQHB5pwnnbcknSMKOLoJ3sV3anh4h6X4hjo7N3dcLQFxXEe0OoIl8zXRu5Y20z2Q5VQPdwX8B/k8MW/RrJjB1JHUV7vNUP38S2Q0TtZcIFciqMncSctYNv7nfxR4mnL++pdUBU83tNJYDzHgzwYgwJhPCXZvvstDsTUfFH4uHp6gjXJfD/GqP4VGuUpPDFzghSbQhybRlsUgPjLGxuqwXXJp5M+otOVP/XdOVzSA5kEXZyIJehDp+hUUR3/YNaPnzvBbyoCJWaCbBc=" # encrypted value of your token
script:
  - cd genstar.gamaplugin.parent
  - mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar -Dsonar.host.url=https://sonarcloud.io -Dsonar.branch=master -Dsonar.projectKey=ANRGenstar_genstar.gamaplugin
  - cd -
after_success:
- echo -e "Host *\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
- export SSHPASS=$USER_PWD
- sh ./publish.sh
branches:
  only:
  - master
